{"version":3,"sources":["scripts/app.js"],"names":["document","app","getElementById","debug","logger","console","info","text","webComponentsSupported","createElement","finishLazyLoading","onImportLoaded","skeleton","remove","dispatchEvent","CustomEvent","bubbles","elementsBaseBundle","import","readyState","addEventListener","script","async","src","onload","head","appendChild","window","Polymer","dom","querySelector","disabled","e","detail","$","infoToast","show","headerTitle","headerSubTitle","headerMiddleBar","headerBottomBar","heightDiff","height","condensedHeight","yRatio","Math","min","y","yRatio2","maxMiddleScale","auxHeight","auxScale","scaleMiddle","max","scaleBottom","matchMedia","matches","Base","transform"],"mappings":"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","file":"app.js","sourcesContent":["/*\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/* global CustomEvent, Polymer */\n\n(function(document) {\n  'use strict';\n\n  // Grab a reference to our auto-binding template\n  // and give it some initial binding values\n  // Learn more about auto-binding templates at http://goo.gl/Dx1u2g\n  let app = document.getElementById('app');\n\n  // Debug mode\n  app.debug = true;\n\n  // Logger for debug mode\n  let logger = text => {\n    if (app.debug) {\n      console.info(text);\n    }\n  };\n\n  // Conditionally load the webcomponents polyfill if needed by the browser.\n  // This feature detect will need to change over time as browsers implement\n  // different features.\n  var webComponentsSupported = ('registerElement' in document &&\n    'import' in document.createElement('link') &&\n    'content' in document.createElement('template'));\n\n  function finishLazyLoading() {\n    // (Optional) Use native Shadow DOM if it's available in the browser.\n    // WARNING! This will mess up the page.js router which uses event delegation\n    // and expects to receive events from anchor tags. These events get re-targeted\n    // by the Shadow DOM to point to <my-app>\n    // window.Polymer = window.Polymer || {dom: 'shadow'};\n\n    // When base-bundle.html with elements is loaded\n    var onImportLoaded = function() {\n      logger('Imports are loaded and elements have been registered!');\n      \n      // Remove skeleton\n      var skeleton = document.getElementById('skeleton');\n      skeleton.remove();\n\n      if (webComponentsSupported) {\n        // Emulate WebComponentsReady event for browsers supporting Web Components natively\n        // (Chrome, Opera, Vivaldi)\n        document.dispatchEvent(\n          new CustomEvent('WebComponentsReady', {bubbles: true})\n        );\n      }\n    };\n\n    var elementsBaseBundle = document.getElementById('elementsBaseBundle');\n\n    // Go if the async Import loaded quickly. Otherwise wait for it.\n    // crbug.com/504944 - readyState never goes to complete until Chrome 46.\n    // crbug.com/505279 - Resource Timing API is not available until Chrome 46.\n    if (elementsBaseBundle.import && elementsBaseBundle.import.readyState === 'complete') {\n      onImportLoaded();\n    } else {\n      elementsBaseBundle.addEventListener('load', onImportLoaded);\n    }\n  }\n\n  if (!webComponentsSupported) {\n    logger('Web Components aren\\'t supported!');\n    var script = document.createElement('script');\n    script.async = true;\n    script.src = 'bower_components/webcomponentsjs/webcomponents-lite.min.js';\n    script.onload = finishLazyLoading;\n    document.head.appendChild(script);\n  } else {\n    logger('Web Components are supported!');\n    finishLazyLoading();\n  }\n\n  // Listen for template bound event to know when bindings\n  // have resolved and content has been stamped to the page\n  app.addEventListener('dom-change', () => {\n    logger('Our app is ready to rock!');\n  });\n\n  // See https://github.com/Polymer/polymer/issues/1381\n  window.addEventListener('WebComponentsReady', () => {\n    /* imports are loaded and elements have been registered */\n  });\n\n  window.addEventListener('service-worker-error', e => {\n    // Check to make sure caching is actually enabled—it won't be in the dev environment.\n    if (!Polymer.dom(document).querySelector('platinum-sw-cache').disabled) {\n      logger(e.detail);\n    }\n  });\n\n  window.addEventListener('service-worker-installed', () => {\n    // Check to make sure caching is actually enabled—it won't be in the dev environment.\n    if (!Polymer.dom(document).querySelector('platinum-sw-cache').disabled) {\n      app.$.infoToast.text = 'Caching complete! This app will work offline.';\n      app.$.infoToast.show();\n    }\n  });\n\n  window.addEventListener('service-worker-updated', e => {\n    // Check to make sure caching is actually enabled—it won't be in the dev environment.\n    if (!Polymer.dom(document).querySelector('platinum-sw-cache').disabled) {\n      logger(e.detail);\n    }\n  });\n\n  // Main area's paper-scroll-header-panel custom condensing transformation of\n  // the headerTitle in the middle-container and the bottom title in the bottom-container.\n  // The headerTitle is moved to top and shrunk on condensing. The bottom sub title\n  // is shrunk to nothing on condensing.\n  window.addEventListener('paper-header-transform', e => {\n    let headerTitle = app.querySelector('.Main-headerTitle');\n    let headerSubTitle = app.querySelector('.Main-headerSubTitle');\n    let headerMiddleBar = app.querySelector('.Main-headerMiddleBar');\n    let headerBottomBar = app.querySelector('.Main-headerBottomBar');\n    let detail = e.detail;\n    let heightDiff = detail.height - detail.condensedHeight;\n    let yRatio = Math.min(1, detail.y / heightDiff);\n    let yRatio2 = Math.min(1, detail.y / (heightDiff + 30));\n    // headerTitle max size when condensed. The smaller the number the smaller the condensed size.\n    var maxMiddleScale = 0.70;\n    var auxHeight = heightDiff - detail.y;\n    var auxScale = heightDiff / (1 - maxMiddleScale);\n    var scaleMiddle = Math.max(maxMiddleScale, auxHeight / auxScale + maxMiddleScale);\n    var scaleBottom = 1 - yRatio;\n\n    // Move/translate headerMiddleContent and headerBottomContent\n    if (window.matchMedia('(min-width: 600px)').matches) {\n      Polymer.Base.transform(`translate3d(0,${yRatio2 * 100}%,0)`, headerMiddleBar);\n    } else {\n      Polymer.Base.transform(`translate3d(${yRatio * 18}px,${yRatio2 * 100}%,0)`,\n        headerMiddleBar);\n      Polymer.Base.transform(`translate3d(${yRatio * 18}px,0,0)`, headerBottomBar);\n    }\n\n    // Scale headerTitle\n    Polymer.Base.transform(`scale(${scaleMiddle}) translateZ(0)`, headerTitle);\n    // Scale headerSubTitle\n    Polymer.Base.transform(`scale(${scaleBottom}) translateZ(0)`, headerSubTitle);\n  });\n\n})(document);\n"]}